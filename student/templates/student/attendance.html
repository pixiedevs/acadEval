{% extends 'main/base.html' %}
{% block title %}
Attendance
{% endblock title %}
{% block description %}attendance page{% endblock description %}

{% block body %}
{% block message %}{% endblock message %}
<!-- main section -->
{% load static %}
<div class="row container mt-5">
    <table class="col table table-striped neupm">
        <tbody>
            <tr>
                <td scope="row">Date: <b>{% now "d/m/Y" %}</b></td>
                <td scope="row">Name: <b>{{ user.get_full_name }}</b></td>
                <td scope="row">Enroll: <b>{{user.username}}</b></td>
            </tr>
            <tr>
                <td scope="row">Branch: <b>{{ user.student.branch }}</b></td>
                <td scope="row">Sem: <b>{{ user.student.semester }}</b></td>
                <td scope="row">Year: <b>{{ user.student.year }}</b></td>
            </tr>
        </tbody>
    </table>
</div>
<div class="row container-fluid mt-2">

    <div class="col-lg">
        <div class="row">
            <div class="col-lg mb-3 neupm">

                <div class="d-flex justify-content-around p-2">

                    <div class="p-2">
                        <label for="sem">Choose semester:</label>
                        <select name="sem" id="sem">
                            {% for s in sem %}
                            <option value="{{s}}" {% if s is sem|last %}selected {% endif %}>{{s}}</option>

                            {% endfor %}
                        </select>
                    </div>
                    <!-- </div>
                            <div class="col m-3 neupm"> -->
                    <div class="p-2">
                        <label for="month">Choose month:</label>

                        <select name="month" id="month">
                            {% for m in month %}
                            <option value="{{ forloop.counter }}" {% if m is month|last %}selected {% endif %}>{{m}}</option>

                            {% endfor %}
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="fetchStudentAttendanceData('{{ csrf_token }}', '/student/attendance', 1)">Fetch</button>
                </div>

            </div>
        </div>
        <div class="row">
            <table class="table table-striped neupm">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Date</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody id="table_data_body">
                    
                </tbody>
            </table>
        </div>
    </div>
    <!-- <div class="col-2"></div> -->

    <div class="col-sm-3 mt-5">
        <div class="cartDiv2 neupm">
            <canvas id="marksChart"></canvas>
        </div>

    </div>
</div>
<div id="hoverFeed" class="neupm"></div>

<script src="{% static 'js/addons.js' %}"></script>
<script>
    fetchStudentAttendanceData('{{ csrf_token }}', '/student/attendance/', 1);
</script>
<!-- Body block End -->

{% endblock body %}
